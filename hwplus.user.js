// ==UserScript==
// @name         Hitwicket+ Beta
// @namespace    Hitwicket+ Beta
// @version      1.0
// @description  Adds additional functionalities to Hitwicket
// @exclude      http://hitwicket.com/session/*
// @require      https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.6.0/moment.min.js
// @require      https://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min.js
// @copyright    akshay9
// ==/UserScript==
 
if($("#login-form").length==0){var prefix="hw_1_";var currURL=location.href;var arrURL=currURL.split("/");function vip_box(){if($("section#vip_box").length!=0){var e=GM_getValue(prefix+"vip_box","[]");e=JSON.parse(e);if(e.join().length>3){var t="/match/summaries?match_ids="+e.join();$.get(t,function(t,n){var r=JSON.parse(t);$("section#vip_box").html(" ");for(x in e){var i=e[x].replace("#","");var s='<div class="match_box" data-id="'+x+'"><div class="string"><span data="'+i+'" id="delete_match" style="float: right;color: #fc0;cursor: pointer;">X</span><a href="/match/show/'+i+'"><span class="match_string">'+r[i]["match_string"]+'</a></div><div class="activity pull-left">'+r[i]["activity"]+"</div></div>";$("section#vip_box").append(s)}$("span#delete_match").click(function(){delete_match($(this).attr("data"))});var o='<a class="track_match" id="custom_track" href="#"><span>+</span>Track</a>';if(arrURL[3]=="match"&&arrURL[4]=="show"){$("section#vip_box").append(o);document.getElementById("custom_track").addEventListener("click",add_match,false)}$("section#vip_box").append('<br clear="all">')})}else{var n='<a class="track_match" id="custom_track" href="#"><span>+</span>Track</a>';$("section#vip_box").html(" ");if(arrURL[3]=="match"&&arrURL[4]=="show"){$("section#vip_box").append(n);document.getElementById("custom_track").addEventListener("click",add_match,false)}$("section#vip_box").append('<br clear="all">')}}else{$("div.container.m15").append('<section id="vip_box"></section>');var e=GM_getValue(prefix+"vip_box","[]");e=JSON.parse(e);if(e.join().length>3){var t="/match/summaries?match_ids="+e.join();$.get(t,function(t,n){var r=JSON.parse(t);for(x in e){var i=e[x].replace("#","");var s='<div class="match_box" data-id="'+x+'"><div class="string"><span data="'+i+'" id="delete_match" style="float: right;color: #fc0;cursor: pointer;">X</span><a href="/match/show/'+i+'"><span class="match_string">'+r[i]["match_string"]+'</a></div><div class="activity pull-left">'+r[i]["activity"]+"</div></div>";$("section#vip_box").append(s)}$("span#delete_match").click(function(){delete_match($(this).attr("data"))});var o='<a class="track_match" id="custom_track" href="#"><span>+</span>Track</a>';if(arrURL[3]=="match"&&arrURL[4]=="show"){$("section#vip_box").append(o);document.getElementById("custom_track").addEventListener("click",add_match,false)}$("section#vip_box").append('<br clear="all">')})}else{var n='<a class="track_match" id="custom_track" href="#"><span>+</span>Track</a>';if(arrURL[3]=="match"&&arrURL[4]=="show"){$("section#vip_box").append(n);document.getElementById("custom_track").addEventListener("click",add_match,false)}$("section#vip_box").append('<br clear="all">')}}}function add_match(){var e=arrURL[5].replace("#","");var t=JSON.parse(GM_getValue(prefix+"vip_box","[]"));if(t.indexOf(e)==-1){t.push(e);GM_setValue(prefix+"vip_box",JSON.stringify(t));alert("Added Successfully!")}else{alert("Match Already Exists !")}}function delete_match(e){var t=JSON.parse(GM_getValue(prefix+"vip_box","[]"));var n=t.indexOf(e);if(n>-1){t.splice(n,1);GM_setValue(prefix+"vip_box",JSON.stringify(t));alert("ID:"+e+" Removed Successfully!")}else{alert("Match: "+e+" Already Removed !")}}vip_box();$(document).ready(function(){setTimeout(function(){setInterval(function(){if($("#custom_track").length!=0){document.getElementById("custom_track").removeEventListener("click",add_match,false)}vip_box()},15e3)},5e3)})}
